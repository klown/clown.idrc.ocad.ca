<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:aria="http://www.w3.org/ns/wai-aria-1/"
      lang="en" xml:lang="en">
<head>
  <title>Mixing aria: and null namespaces</title>
  <style type="text/css">
    span.out {
        font-weight: bold;
    }
    
    span[role='spinbutton'] {
        display: inline-block;
        width:  32px;
        border:  2px inset black;
        text-align: right;
    }
  </style>
  <script type="text/javascript">
  
    function printAriaAttributes() {
        colonSpinner = document.getElementById ('ariaColonSpinner');
        noColonSpinner = document.getElementById ('ariaNoColonSpinner');
        
        // aria:aria-* attributes.
        //
        if (colonSpinner.getAttributeNS) {
            text = massageText (colonSpinner.getAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria-valuenow"));
        }
        else {
            text = "getAttributeNS() not supported";
        }
        document.getElementById ('out1').innerHTML = text;
        
        text = massageText (colonSpinner.getAttribute ("aria:aria-valuenow"));
        document.getElementById ('out1a').innerHTML = text;
        
        text = massageText (colonSpinner.getAttribute ("aria-valuenow"));
        document.getElementById ('out2').innerHTML = text;
        
        text = massageText (colonSpinner.getAttribute ("aria-valuemin"));
        document.getElementById ('out2a').innerHTML = text;
        
        // aria-* attributes.
        //
        text = massageText (noColonSpinner.getAttribute ("aria-valuenow"));
        document.getElementById('out3').innerHTML = text;
        
        if (noColonSpinner.getAttributeNS) {
            text = massageText (noColonSpinner.getAttributeNS ("", "aria-valuenow"));
            document.getElementById ('out4').innerHTML = text;
            
            text = massageText (noColonSpinner.getAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria-valuenow"));
            document.getElementById ('out5').innerHTML = text;            
        }
        else {
            text = "getAttributeNS() not supported";
            document.getElementById ('out4').innerHTML = text;
            document.getElementById ('out5').innerHTML = text;            
       }
       text = massageText (noColonSpinner.getAttribute ("aria:aria-valuenow"));
       document.getElementById ('out6').innerHTML = text;
    }
    
    function massageText(string) {
        if (typeof string == "undefined")
            string = "undefined"
        else if (string == null)
            string = "null";
        else if (string.length == 0)
            string = "empty string";
        return string;
    }
    
    function updateAriaValueNow (el, event) {
        val = el.firstChild.data; //el.getText();
        if (el.hasAttributeNS) {
            if (el.hasAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria-valuenow"))
                el.setAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria:aria-valuenow", val);
        }
        else {
            if (el.hasAttribute ("aria:aria-valuenow"))
                el.setAttribute ("aria:aria-valuenow", val);    
        }
        
        if (el.hasAttribute ("aria-valuenow")) {
            el.setAttribute ("aria-valuenow", val);
        }
        el.setAttribute ("value", val);
        printAriaAttributes();

        if (event.stopPropagation) 
            event.stopPropagation();
        else
            window.event.cancelBubble = true;

        if (event.preventDefault)
            event.preventDefault();
        else
            event.returnValue = false;
    }
        
  </script>
</head>
<body onload="printAriaAttributes();">
<h1>Mixing aria: and null namespaces</h1>
<p>This document begins:
    <blockquote>
      <pre>
        &lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
        &lt;html xmlns="http://www.w3.org/1999/xhtml"
            xmlns:aria="http://www.w3.org/ns/wai-aria-1/"
            lang="en" xml:lang="en"&gt;
      </pre>
    </blockquote>
</p>
<h2>Spinner with 'aria:aria-' attributes</h2>
    <p><code>&lt;input role="spinbutton" aria:aria-label="Volume" aria:aria-valuemin="0.0" aria:aria-valuemax="100.0" aria:aria-valuenow="25" aria-valuenow="999" value="25 /&gt;</code></p>
    <p>
        <span id="ariaColonSpinner"
            role="spinbutton"
            aria:aria-label="Volume"
            aria:aria-valuemin="0.0"
            aria:aria-valuemax="100.0"
            aria:aria-valuenow="25"
            aria-valuenow="999"
            tabindex="0"
            onkeydown="updateAriaValueNow (this, event);">25</span>
    </p>
    <p>Note: the above spinner has both an <code>aria:aria-valuenow</code>,
       <em>and</em> an <code>aria-valuenow</code>.</p>
    <p>The following shows the output if one uses <code>getAttribute()</code>
       and <code>getAttributeNS()</code> to access aria attributes in the two
       namespaces.  The result is generated by executing those calls.</p>
    <ul>
        <li>getAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria-valuenow"): '<span id="out1" class="out"></span>'</li>
        <li>getAttribute ("aria:aria-valuenow"): '<span id="out1a" class="out"></span>'</li>
        <li>getAttribute ("aria-valuenow"): '<span id="out2" class="out"></span>'</li>
        <li>getAttribute ("aria-valuemin"): '<span id="out2a" class="out"></span>' (note:  there is no <code>aria-valuemin</code> attribute).</li>
    </ul>
    <hr />
    
    <h2>Spinner with 'aria-' attributes</h2>
    <p><code>&lt;input role="spinbutton" aria-label="Volume" aria-valuemin="0.0"&nbsp;aria-valuemax="100.0"&nbsp;aria-valuenow="33" value="33" /&gt;</code></p>
    <p>
        <input id="ariaNoColonSpinner"
            role="spinbutton"
            aria-label="Volume"
            aria-valuemin="0.0" 
            aria-valuemax="100.0"
            aria-valuenow="33"
            value="33" 
            onchange="updateAriaValueNow (this);" />    
   </p>
    <ul>
        <li>getAttribute ("aria-valuenow"): '<span id="out3" class="out"></span>'</li>
        <li>getAttributeNS ("", "aria-valuenow"): '<span id="out4" class="out"></span>'</li>
        <li>getAttributeNS ("http://www.w3.org/ns/wai-aria-1/", "aria-valuenow"): '<span id="out5" class="out"></span>' (note:  there is no <code>aria:aria-valuenow</code> attribute).</li>
        <li>getAttribute ("aria:aria-valuenow"): '<span id="out6" class="out"></span>' (note:  there is no <code>aria:aria-valuenow</code> attribute).</li>
    </ul>
</body>
</html>
